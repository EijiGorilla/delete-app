import{ac as A,Y as b,S as D}from"./index-DftRe4XB.js";const S=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function y(e){return e instanceof D}function h(e){return e instanceof b?Object.keys(e.items):y(e)?A(e).keys():e?Object.keys(e):[]}function a(e,n){return e instanceof b?e.items[n]:e[n]}function k(e,n){return!(!Array.isArray(e)||!Array.isArray(n))&&e.length!==n.length}function c(e){return e?e.declaredClass:null}function g(e,n){const t=e.diff;if(t&&typeof t=="function")return t(e,n);const i=h(e),u=h(n);if(i.length===0&&u.length===0)return;if(!i.length||!u.length||k(e,n))return{type:"complete",oldValue:e,newValue:n};const V=u.filter(o=>!i.includes(o)),w=i.filter(o=>!u.includes(o)),d=i.filter(o=>u.includes(o)&&a(e,o)!==a(n,o)).concat(V,w).sort(),m=c(e);if(m&&S.has(m)&&d.length)return{type:"complete",oldValue:e,newValue:n};let s;const j=y(e)&&y(n);for(const o of d){const l=a(e,o),r=a(n,o);let f;if((j||typeof l!="function"&&typeof r!="function")&&l!==r&&(l!=null||r!=null)){if(t&&t[o]&&typeof t[o]=="function")f=t[o]?.(l,r);else if(l instanceof Date&&r instanceof Date){if(l.getTime()===r.getTime())continue;f={type:"complete",oldValue:l,newValue:r}}else f=typeof l=="object"&&typeof r=="object"&&c(l)===c(r)?g(l,r):{type:"complete",oldValue:l,newValue:r};f!=null&&(s!=null?s.diff[o]=f:s={type:"partial",diff:{[o]:f}})}}return s}function P(e,n){if(typeof e!="function"&&typeof n!="function"&&(e!=null||n!=null))return e==null||n==null||typeof e=="object"&&typeof n=="object"&&c(e)!==c(n)?{type:"complete",oldValue:e,newValue:n}:g(e,n)}function p(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const n=e;for(const t of n.added)if(!p(t))return!1;for(const t of n.removed)if(!p(t))return!1;for(const t of n.changed)if(!p(t))return!1;return!0}case"partial":for(const n in e.diff)if(!p(e.diff[n]))return!1;return!0}}export{p as d,P as y};
