import{u as r}from"./workerHelper-BR8qR6M1.js";import{EdgeInputBufferLayout as d}from"./bufferLayouts-C8NWTr8J.js";import{gw as c}from"./index-DftRe4XB.js";import{extract as l,extractEdgeInformation as u,extractComponentsEdgeLocationsLayout as f,extractEdgeLocationsLayout as g}from"./edgeProcessing-BTt5LZFJ.js";import"./deduplicate-BSHZVIEL.js";class b{async extract(e){const t=o(e),s=l(t),i=[t.data.buffer];return{result:p(s,i),transferList:i}}async extractComponentsEdgeLocations(e){const t=o(e),s=u(t.data,t.skipDeduplicate,t.indices,t.indicesLength),i=c(s,y),a=[];return{result:r(i.regular.instancesData,a),transferList:a}}async extractEdgeLocations(e){const t=o(e),s=u(t.data,t.skipDeduplicate,t.indices,t.indicesLength),i=c(s,L),a=[];return{result:r(i.regular.instancesData,a),transferList:a}}}function o(n){return{data:d.createView(n.dataBuffer),indices:n.indicesType==="Uint32Array"?new Uint32Array(n.indices):n.indicesType==="Uint16Array"?new Uint16Array(n.indices):n.indices,indicesLength:n.indicesLength,writerSettings:n.writerSettings,skipDeduplicate:n.skipDeduplicate}}function p(n,e){return e.push(n.regular.lodInfo.lengths.buffer),e.push(n.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:r(n.regular.instancesData,e),lodInfo:{lengths:n.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:r(n.silhouette.instancesData,e),lodInfo:{lengths:n.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:n.averageEdgeLength}}class h{allocate(e){return g.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,s){e.position0.setVec(t,s.position0),e.position1.setVec(t,s.position1)}}class m{allocate(e){return f.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,s){e.position0.setVec(t,s.position0),e.position1.setVec(t,s.position1),e.componentIndex.set(t,s.componentIndex)}}const L=new h,y=new m;export{b as default};
